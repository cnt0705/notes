# TDD or BDD

## TDD - Test Driven Development -

### 手順

1. 【Red】期待するテストコードと、失敗するテスト対象コードを書く（`return false`を返す、とか）
1. 【Green】テストが成功するように、テスト対象コードを修正する
1. 【Red】失敗するようなテストコードを追記する
1. 【Green】テストが成功するように、テスト対象コードをさらに修正する
1. 【Refactoring】キリの良いタイミングで、テスト対象コードをリファクタリングする

### メリット

- はじめにテストコードを書くことで、要件が明確化される
- 仕様の矛盾にあらかじめ気づくことができる
- 疎結合でリーダブルなコードを書くことができる

### デメリット

- テストパターンが多いとその分工数もかさむ
- テストの粒度を個人間で揃えるのが難しい
- 仕様変化の速度がはやいプロジェクトでは、テストの修正が追いつけなくなる

## BDD - Behavior Driven Development -

- メソッドの振る舞いが正しいかを検証する仕様（スペック）をテストコードとして書く
- **クラスやモジュールなどの構成単位**を対象としてテストを回すTDDに対し、**ユースケースを対象**とする

### テスタブルJavaScriptより

> ビヘイビア駆動開発（BDD: Behavior-Driven Development）はTDDを元にしており、開発者もそうでない人も共通の言語を使ってアプリケーションやモジュールのふるまいを表現できるようにしようというものです。(中略) 例えば、testEmptyCartというテストを作成するのではなく、テスト対象のふるまいを「ショッピングカートが空の場合は、ユーザは購入手続きに進めません」というように記述します。(中略) BDDはアジャイル開発で使われているユーザーストーリーがテストへ直接変換されます。一般的には、ユーザーストーリーは「私は[誰か]として[何かを行っ]て、[何かの処理結果を得る]ようにしたい」というテンプレートに基づいていなければなりません。

ユーザーストーリーを直接テストコードに落とせることで「これって前々回のイテレーションで実装したはずなんだけどデグレしてる」といった事態をプロセス的に防ぐ

### 生まれた経緯

- 前提：BDDはTDDの発展系である
- TDDを行うことで、最小単位のモジュールの挙動を保障できる
- モジュールを組み合わせて動作を保障したいとき、もう一つ上のテストケースを書く必要が出てくる
- 上記に加え、仕様の変更・追加に対応しようとすると、テストを書く量が膨大になってしまう
- そもそも、仕様に直接関係ない最小単位のモジュールのテストケースを充実させたところで、システムの品質を保障するためにはコストが見合わないのでは？
- それよりも、組合せ(仕様を満たした挙動の保障と、想定される異常系の挙動)を保障することに注力する方が効率的なのでは？
- BDD爆誕

## 参考

- [いまさら聞けないTDD/BDD超入門](http://www.atmarkit.co.jp/ait/series/1431/)
- [アジャイル開発における「TDD」と「BDD」の違いについて](http://shrine-bell.seesaa.net/article/162082402.html)
- [テスト駆動開発（TDD）初心者が陥りがちなアンチパターン6選](http://tracpath.com/works/development/test_driven_development_6_anti_pattern/)
- [テスト駆動開発について僕は誤解していた](http://pg-kura.hatenablog.com/entry/20120306/1331040054)
